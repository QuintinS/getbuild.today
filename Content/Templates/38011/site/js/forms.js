(function(n){n.fn.extend({forms:function(t){return t===undefined&&(t={}),this.each(function(){var u=n(this),r=u.data("forms"),i={errorCl:"error",emptyCl:"empty",invalidCl:"invalid",notRequiredCl:"notRequired",successCl:"success",successShow:"4000",mailHandlerURL:"bin/MailHandler.php",ownerEmail:"#",stripHTML:!0,smtpMailServer:"localhost",targets:"input,textarea",controls:"a[data-type=reset],a[data-type=submit]",validate:!0,rx:{".name":{rx:/^[a-zA-Z'][a-zA-Z-' ]+[a-zA-Z']?$/,target:"input"},".state":{rx:/^[a-zA-Z'][a-zA-Z-' ]+[a-zA-Z']?$/,target:"input"},".email":{rx:/^(("[\w-\s]+")|([\w-]+(?:\.[\w-]+)*)|("[\w-\s]+")([\w-]+(?:\.[\w-]+)*))(@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$)|(@\[?((25[0-5]\.|2[0-4][0-9]\.|1[0-9]{2}\.|[0-9]{1,2}\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\]?$)/i,target:"input"},".phone":{rx:/^\+?(\d[\d\-\+\(\) ]{5,}\d$)/,target:"input"},".fax":{rx:/^\+?(\d[\d\-\+\(\) ]{5,}\d$)/,target:"input"},".message":{rx:/.{20}/,target:"textarea"}},preFu:function(){i.labels.each(function(){var t=n(this),r=n(i.targets,this),u=r.val(),f=function(){var n=r.is("input")?(n=t.html().match(/value=['"](.+?)['"].+/),!!n&&!!n[1]&&n[1]):r.html();return u==""?u:n}();f!=u&&r.val(u=f||u);t.data({defVal:u});r.bind("focus",function(){r.val()==u&&(r.val(""),i.hideEmptyFu(t),t.removeClass(i.invalidCl))}).bind("blur",function(){i.validateFu(t);i.isEmpty(t)&&(r.val(u),i.hideErrorFu(t.removeClass(i.invalidCl)))}).bind("keyup",function(){t.hasClass(i.invalidCl)&&i.validateFu(t)});t.find("."+i.errorCl+",."+i.emptyCl).css({display:"block"}).hide()});i.success=n("."+i.successCl,i.form).hide()},isRequired:function(n){return!n.hasClass(i.notRequiredCl)},isValid:function(t){var r=!0;return n.each(i.rx,function(n,i){t.is(n)&&(r=i.rx.test(t.find(i.target).val()))}),r},isEmpty:function(n){var t;return(t=n.find(i.targets).val())==""||t==n.data("defVal")},validateFu:function(t){t.each(function(){var t=n(this),u=i.isRequired(t),r=i.isEmpty(t),f=i.isValid(t);r&&u?i.showEmptyFu(t.addClass(i.invalidCl)):i.hideEmptyFu(t.removeClass(i.invalidCl));r||(f?i.hideErrorFu(t.removeClass(i.invalidCl)):i.showErrorFu(t.addClass(i.invalidCl)))})},getValFromLabel:function(t){var i=n("input,textarea",t).val(),r=t.data("defVal");return t.length?i==r?"nope":i:"nope"},submitFu:function(){i.validateFu(i.labels);i.form.has("."+i.invalidCl).length||n.ajax({type:"POST",url:i.mailHandlerURL,data:{name:i.getValFromLabel(n(".name",i.form)),email:i.getValFromLabel(n(".email",i.form)),phone:i.getValFromLabel(n(".phone",i.form)),fax:i.getValFromLabel(n(".fax",i.form)),state:i.getValFromLabel(n(".state",i.form)),message:i.getValFromLabel(n(".message",i.form)),owner_email:i.ownerEmail,stripHTML:i.stripHTML},success:function(){i.showFu()}})},showFu:function(){i.success.slideDown(function(){setTimeout(function(){i.success.slideUp();i.form.trigger("reset")},i.successShow)})},controlsFu:function(){n(i.controls,i.form).each(function(){var t=n(this);t.bind("click",function(){return i.form.trigger(t.data("type")),!1})})},showErrorFu:function(n){n.find("."+i.errorCl).slideDown()},hideErrorFu:function(n){n.find("."+i.errorCl).slideUp()},showEmptyFu:function(n){n.find("."+i.emptyCl).slideDown();i.hideErrorFu(n)},hideEmptyFu:function(n){n.find("."+i.emptyCl).slideUp()},init:function(){i.form=this;i.labels=n("label",i.form);i.preFu();i.controlsFu();i.form.bind("submit",function(){return i.validate?i.submitFu():i.form[0].submit(),!1}).bind("reset",function(){i.labels.removeClass(i.invalidCl);i.labels.each(function(){var t=n(this);i.hideErrorFu(t);i.hideEmptyFu(t)})});i.form.trigger("reset")}};r?i=typeof t=="object"?n.extend(r,t):r:((typeof t=="object"?n.extend(i,t):i).init.call(u),u.data({cScroll:i}),r=i)}),this}})})(jQuery);$(window).load(function(){$("#contact-form").forms({ownerEmail:"#"})});