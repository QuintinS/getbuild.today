(function(n){n.fn.loopedCarousel=function(t){var i={container:".container",slides:".slides",pagination:".pagination",autoStart:0,slidespeed:300,fadespeed:300,items:1,padding:0,showPagination:!0,vertical:!1};this.each(function(){function d(t){t===v+1&&(t=1);t===0&&(t=v);n(r.pagination+" li a",f).parent().siblings().removeClass("active");n(r.pagination+' li a[rel="'+t+'"]',f).parent().addClass("active")}function k(t){y=!0;switch(t){case"next":s=s+1;p=-(s*o-o)*h;d(s);e[r.vertical?"top":"left"]=p;n(r.slides,f).animate(e,r.slidespeed,function(){s===v+1&&(s=1,e[r.vertical?"top":"left"]=0,n(r.slides,f).css(e,function(){n(r.slides,f).animate(e)}),n(r.slides,f).children().each(function(){if(u<h)e[r.vertical?"top":"left"]=o*u+l,n(r.slides,f).children(":eq("+u+")").css(e),e[r.vertical?"top":"left"]=-(o*(u+a+1)-l),n(r.slides,f).children(":eq("+(c-(u+1))+")").css(e);else return u=0,!1;u=u+1}));s===v&&n(r.slides,f).children().each(function(){if(u<h)e[r.vertical?"top":"left"]=o*(c+u+a)+l,n(r.slides,f).children(":eq("+u+")").css(e);else return u=0,!1;u=u+1});s===2&&n(r.slides,f).children().each(function(){if(u=u+1,u<h+1)e[r.vertical?"top":"left"]=o*c+l-o*u,n(r.slides,f).children(":eq("+(c-u)+")").css(e);else return u=0,!1});y=!1});break;case"prev":s=s-1;p=-(s*o-o)*h;d(s);e[r.vertical?"top":"left"]=p;n(r.slides,f).animate(e,r.slidespeed,function(){s===0&&(s=v,e[r.vertical?"top":"left"]=-o*(c-h)-o*a,n(r.slides,f).css(e),n(r.slides,f).children().each(function(){if(u<h)e[r.vertical?"top":"left"]=o*(c+u+a)+l,n(r.slides,f).children(":eq("+u+")").css(e),e[r.vertical?"top":"left"]=c*o+l-u*o-o,n(r.slides,f).children(":eq("+(c-1-u)+")").css(e);else return u=0,!1;u=u+1}));s===2&&n(r.slides,f).children().each(function(){if(u<h)e[r.vertical?"top":"left"]=o*u+l,n(r.slides,f).children(":eq("+u+")").css(e);else return u=0,!1;u=u+1});s===1&&n(r.slides,f).children().each(function(){if(u<h)e[r.vertical?"top":"left"]=-(o*u)-o+l-o*a,n(r.slides,f).children(":eq("+(c-1-u)+")").css(e);else return u=0,!1;u=u+1});y=!1});break;case"fade":s=[s]*1;p=-(s*o-o)*h;d(s);n(r.slides,f).children().fadeOut(r.fadespeed,function(){e[r.vertical?"top":"left"]=p;n(r.slides,f).css(e);n(r.slides,f).children().each(function(){if(u<h)e[r.vertical?"top":"left"]=u*o+l,n(r.slides,f).children(":eq("+u+")").css(e),e[r.vertical?"top":"left"]=o*(c-u)-o+l,n(r.slides,f).children(":eq("+(c-1-u)+")").css(e);else return u=0,!1;u=u+1});s===v&&n(r.slides,f).children().each(function(){if(u<h)e[r.vertical?"top":"left"]=o*(c+u+a)+l,n(r.slides,f).children(":eq("+u+")").css(e);else return u=0,!1;u=u+1});s===1&&n(r.slides,f).children().each(function(){if(u=u+1,u<h+1)e[r.vertical?"top":"left"]=-(o*u)+l-o*a,n(r.slides,f).children(":eq("+(c-u)+")").css(e);else return u=0,!1});n(r.slides,f).children().fadeIn(r.fadespeed);y=!1})}}var f=n(this),r=n.extend(i,t),h=r.items,p=0,s=1,c=n(r.slides,f).children().size(),o=n(r.slides,f).children().outerWidth()+r.padding,nt=n(r.slides,f).children().outerHeight()+r.padding,v=Math.ceil(n(r.slides,f).children().size()/h),l=r.padding/2,b=0,y=!1,w=0,u=0,a=h*v-c,e={},g;r.vertical===!0&&(o=nt);r.showPagination&&(g=c/h,n(f).append('<ul class="pagination">'),n(r.slides,f).children().each(function(){if(w<g)n(r.pagination,f).append('<li><a rel="'+(w+1)+'" href="#" >'+(w+1)+"<\/a><\/li>"),w=w+1;else return w=0,!1;n(r.pagination+" li a:eq(0)",f).parent().addClass("active")}));r.vertical===!0?(n(r.container,f).css({height:o*h}),n(r.slides,f).css({height:c*o})):(n(r.container,f).css({width:o*h}),n(r.slides,f).css({width:c*o}));n(r.slides,f).children().each(function(){r.vertical===!0?n(this).css({position:"absolute",top:b+l,display:"block"}):n(this).css({position:"absolute",left:b+l,display:"block"});b=b+o});n(r.slides,f).children().each(function(){return u=u+1,u<h+1&&(e[r.vertical?"top":"left"]=-o*u+l-o*a,n(r.slides,f).children(":eq("+(c-u)+")").css(e)),u===h+2?(u=0,!1):void 0});n(".next",f).click(function(){return y===!1&&(k("next",!0),r.autoStart&&clearInterval(sliderIntervalID)),!1});n(".previous",f).click(function(){return y===!1&&(k("prev",!0),r.autoStart&&clearInterval(sliderIntervalID)),!1});n(r.pagination+" li a",f).click(function(){return n(this).parent().hasClass("active")?!1:(s=n(this).attr("rel"),n(r.pagination+" li a",f).parent().siblings().removeClass("active"),n(this).parent().addClass("active"),k("fade",s),r.autoStart&&clearInterval(sliderIntervalID),!1)});r.autoStart&&(sliderIntervalID=setInterval(function(){y===!1&&k("next",!0)},r.autoStart))})}})(jQuery);