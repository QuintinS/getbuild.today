var Stripe={StripeHandler:null,StripeResponseHandler:function(token){Checkout.storage.token=token,Stripe.StripeForm.add(),Stripe.StripeForm.populate(),Stripe.StripeForm.submit()},StripeForm:{add:function(){var StripeForm=document.createElement("form");StripeForm.setAttribute("method","post"),StripeForm.setAttribute("id","StripeForm"),StripeForm.setAttribute("action","/Stripe/DoStripe.asp"),StripeForm.setAttribute("style","display:none"),document.body.appendChild(StripeForm)},populate:function(){var token;token=Checkout.storage.token;var TokenJSON=JSON.stringify(token);$("#StripeForm").append('<input type="hidden" name="JSON" value="'+TokenJSON+'" />'),$("#StripeForm").append('<input type="hidden" name="card_holder_name" value="'+PaymentGateway.PostData.data.card_holder_name+'" />'),$("#StripeForm").append('<input type="hidden" name="street_address" value="'+PaymentGateway.PostData.data.street_address+'" />'),$("#StripeForm").append('<input type="hidden" name="street_address2" value="'+PaymentGateway.PostData.data.street_address2+'" />'),$("#StripeForm").append('<input type="hidden" name="city" value="'+PaymentGateway.PostData.data.city+'" />'),$("#StripeForm").append('<input type="hidden" name="state" value="'+PaymentGateway.PostData.data.state+'" />'),$("#StripeForm").append('<input type="hidden" name="zip" value="'+PaymentGateway.PostData.data.zip+'" />'),$("#StripeForm").append('<input type="hidden" name="country" value="'+PaymentGateway.PostData.data.country+'" />'),$("#StripeForm").append('<input type="hidden" name="email" value="'+PaymentGateway.PostData.data.email+'" />'),$("#StripeForm").append('<input type="hidden" name="phone" value="'+PaymentGateway.PostData.data.phone+'" />'),$("#StripeForm").append('<input type="hidden" name="li_0_description" value="'+PaymentGateway.PostData.data.li_0_description+'" />'),$("#StripeForm").append('<input type="hidden" name="li_1_description" value="'+PaymentGateway.PostData.data.li_1_description+'" />'),$("#StripeForm").append($('<input type="hidden" name="stripeTokenID" />').val(token.id)),$("#StripeForm").append($('<input type="hidden" name="stripeTokenObject" />').val(token.object)),$("#StripeForm").append($('<input type="hidden" name="stripeTokenClientIP" />').val(token.client_ip)),$("#StripeForm").append($('<input type="hidden" name="stripeTokenCreated" />').val(token.created)),$("#StripeForm").append($('<input type="hidden" name="stripeTokenEmail" />').val(token.email)),$("#StripeForm").append($('<input type="hidden" name="stripeTokenLiveMode" />').val(token.livemode)),$("#StripeForm").append($('<input type="hidden" name="stripeTokenType" />').val(token.type)),$("#StripeForm").append($('<input type="hidden" name="stripeTokenUsed" />').val(token.used)),$("#StripeForm").append($('<input type="hidden" name="stripeTokenVerificationAllowed" />').val(token["verification allowed"])),"card"===Checkout.storage.token.type&&($("#StripeForm").append($('<input type="hidden" name="stripeTokenCard_Brand" />').val(token.card.brand)),$("#StripeForm").append($('<input type="hidden" name="stripeTokenCard_Country" />').val(token.card.country)),$("#StripeForm").append($('<input type="hidden" name="stripeTokenCard_CVCCheck" />').val(token.card.cvc_check)),$("#StripeForm").append($('<input type="hidden" name="stripeTokenCard_ExpMonth" />').val(token.card.exp_month)),$("#StripeForm").append($('<input type="hidden" name="stripeTokenCard_ExpYear" />').val(token.card.exp_year)),$("#StripeForm").append($('<input type="hidden" name="stripeTokenCard_Funding" />').val(token.card.funding)),$("#StripeForm").append($('<input type="hidden" name="stripeTokenCard_ID" />').val(token.card.id)),$("#StripeForm").append($('<input type="hidden" name="stripeTokenCard_Last4" />').val(token.card.last4)),$("#StripeForm").append($('<input type="hidden" name="stripeTokenCard_Name" />').val(token.card.name)),$("#StripeForm").append($('<input type="hidden" name="stripeTokenCard_Object" />').val(token.card.object)))},submit:function(){Framework.UI.loadingOverlay.add({text:"Setting up your Website..."}),document.forms.StripeForm.submit()}},StripeOptions:{data:{key:null,token:null,image:null,locale:null,currency:null,panelLabel:null,zipCode:null,billingAddress:null,shippingAddress:null,email:null,labelOnly:null,allowRememberMe:null,bitcoin:null,alipay:null,alipayReusable:null,opened:null,closed:null},capture:function(){var myAddress="";myAddress+=PaymentGateway.PostData.data.street_address+", ",myAddress+=PaymentGateway.PostData.data.street_address2+", ",myAddress+=PaymentGateway.PostData.data.city+", ",myAddress+=PaymentGateway.PostData.data.state,Stripe.StripeOptions.data.token=Stripe.StripeResponseHandler,Stripe.StripeOptions.data.key=PaymentGateway.API.Keys.TestPublishable,Stripe.StripeOptions.data.image="/images/stripe-logo.png",Stripe.StripeOptions.data.locale="auto",Stripe.StripeOptions.data.currency="USD",Stripe.StripeOptions.data.panelLabel=null,Stripe.StripeOptions.data.zipCode=PaymentGateway.PostData.data.zip,Stripe.StripeOptions.data.email=PaymentGateway.PostData.data.email,Stripe.StripeOptions.data.labelOnly=null,Stripe.StripeOptions.data.allowRememberMe=null,Stripe.StripeOptions.data.bitcoin=null,Stripe.StripeOptions.data.alipay=null,Stripe.StripeOptions.data.alipayReusable=null,Stripe.StripeOptions.data.opened=Framework.UI.loadingOverlay.add,Stripe.StripeOptions.data.closed=Framework.UI.loadingOverlay.hide},clear:function(){Stripe.StripeOptions.data.key=null,Stripe.StripeOptions.data.token=null,Stripe.StripeOptions.data.image=null,Stripe.StripeOptions.data.locale=null,Stripe.StripeOptions.data.currency=null,Stripe.StripeOptions.data.panelLabel=null,Stripe.StripeOptions.data.zipCode=null,Stripe.StripeOptions.data.billingAddress=null,Stripe.StripeOptions.data.shippingAddress=null,Stripe.StripeOptions.data.email=null,Stripe.StripeOptions.data.labelOnly=null,Stripe.StripeOptions.data.allowRememberMe=null,Stripe.StripeOptions.data.bitcoin=null,Stripe.StripeOptions.data.alipay=null,Stripe.StripeOptions.data.alipayReusable=null,Stripe.StripeOptions.data.opened=null,Stripe.StripeOptions.data.closed=null}}},PaymentGateway={ready:!1,API:{Keys:{TestPublishable:"pk_test_xAwJMiXYzWYs2FlhcXLVLX3M",LivePublishable:"pk_live_i85izWOGIij0CQIqFUFDCXIS"}},templates:{printCheckout:function(options){if(void 0===options.amount||"string"!=typeof options.amount)throw"ArgumentError: Must pass argument 'amount' as type 'string'.";return myKey=PaymentGateway.API.Keys.TestPublishable,myImage="/images/logo-build-b-large.png",myName="GetBuild.Today",myDescription=options.description||null,myAmount=options.amount,myLocale=options.locale||"auto",returnHTML="",returnHTML+="<script",returnHTML+=' src="https://checkout.stripe.com/checkout.js"',returnHTML+=' class="stripe-button"',returnHTML+=' data-key="'+myKey+'"',returnHTML+=' data-image="'+myImage+'"',returnHTML+=' data-name="'+myName+'"',returnHTML+=' data-description="'+myDescription+'"',returnHTML+=' data-amount="'+myAmount+'"',returnHTML+=' data-locale="'+myLocale+'">',returnHTML+="</script>",returnHTML}},PostData:{clear:function(){PaymentGateway.PostData.data.card_holder_name=null,PaymentGateway.PostData.data.street_address=null,PaymentGateway.PostData.data.street_address2=null,PaymentGateway.PostData.data.city=null,PaymentGateway.PostData.data.state=null,PaymentGateway.PostData.data.zip=null,PaymentGateway.PostData.data.country=null,PaymentGateway.PostData.data.ship_name=null,PaymentGateway.PostData.data.ship_street_address=null,PaymentGateway.PostData.data.ship_street_address2=null,PaymentGateway.PostData.data.ship_city=null,PaymentGateway.PostData.data.ship_state=null,PaymentGateway.PostData.data.ship_zip=null,PaymentGateway.PostData.data.ship_country=null,PaymentGateway.PostData.data.email=null,PaymentGateway.PostData.data.phone=null},capture:function(){var myFullName="",myAddressLine1=$("#RegistrationAddressLine1").val(),myAddressLine2=$("#RegistrationAddressLine2").val(),myCity=$("#RegistrationCity").val(),myRegionName=$("#RegistrationRegion").find("option:selected").text(),myCountryName=$("#RegistrationCountry").find("option:selected").text(),myPostalCode=$("#RegistrationPostalCode").val(),myEmailAddress=$("#emailaddress").val(),myPhoneNumber=$("#RegistrationPhoneNumber").val(),mySubDomain=$("#RegistrationSubdomain").val();myFullName+=$("#RegistrationFirstName").val(),myFullName+=" ",myFullName+=$("#RegistrationLastName").val();var ProductName,ProductQuantity,ProductPrice,ProductDuration,ProductRecurrence;if("free"===Checkout.storage.PricingPlan.code)ProductName="Build - 14 Day Trial",ProductQuantity=1,ProductPrice=0,ProductDuration="14 Days";else if("monthly"===Checkout.storage.PricingPlan.code)ProductName="Build - Monthly Subscription",ProductQuantity=1,ProductPrice=20,ProductDuration="1 Month",ProductRecurrence="1 Month";else{if("yearly"!==Checkout.storage.PricingPlan.code)throw"Error: Checkout.storage.PricingPlan.code must be 'free', 'monthly' or 'yearly'.";ProductName="Build - Yearly Subcription",ProductQuantity=1,ProductPrice=150,ProductDuration="12 Months"}PaymentGateway.PostData.data={card_holder_name:myFullName,street_address:myAddressLine1,street_address2:myAddressLine2,city:myCity,state:myRegionName,zip:myPostalCode,country:myCountryName,ship_name:myFullName,ship_street_address:myAddressLine1,ship_street_address2:myAddressLine2,ship_city:myCity,ship_state:myRegionName,ship_zip:myPostalCode,ship_country:myCountryName,email:myEmailAddress,phone:myPhoneNumber,li_0_type:null,li_0_name:null,li_0_description:Checkout.storage.TemplateID,li_0_quantity:null,li_0_price:null,li_0_tangible:null,li_0_duration:null,li_1_type:null,li_1_name:null,li_1_description:mySubDomain,li_1_quantity:null,li_1_price:null,li_1_tangible:null,product:{name:ProductName,quantity:ProductQuantity,price:ProductPrice,duration:ProductDuration,recurrance:ProductRecurrence}}},data:{card_holder_name:null,street_address:null,street_address2:null,city:null,state:null,zip:null,country:null,ship_name:null,ship_street_address:null,ship_street_address2:null,ship_city:null,ship_state:null,ship_zip:null,ship_country:null,email:null,phone:null,product:null,li_0_type:null,li_0_name:null,li_0_description:null,li_0_quantity:null,li_0_price:null,li_0_tangible:null,li_0_duration:null,li_1_type:null,li_1_name:null,li_1_description:null,li_1_quantity:null,li_1_price:null,li_1_tangible:null}},trigger:function(){PaymentGateway.PostData.clear(),PaymentGateway.PostData.capture(),Stripe.StripeOptions.capture();var myFullName=PaymentGateway.PostData.data.card_holder_name,myStreetAddress1=PaymentGateway.PostData.data.street_address,myStreetAddress2=PaymentGateway.PostData.data.street_address2,myCountry=PaymentGateway.PostData.data.country,myState=PaymentGateway.PostData.data.state,myCity=PaymentGateway.PostData.data.city,myZip=PaymentGateway.PostData.data.zip,myEmail=PaymentGateway.PostData.data.email,myPhone=PaymentGateway.PostData.data.phone,myTemplateID=PaymentGateway.PostData.data.li_0_description,mySubDomain=PaymentGateway.PostData.data.li_1_description;"free"===Checkout.storage.PricingPlan.code?(Framework.UI.loadingOverlay.add({text:"Setting up your free trial Website..."}),$("#RegistrationForm [name='card_holder_name']").val(myFullName),$("#RegistrationForm [name='street_address']").val(myStreetAddress1),$("#RegistrationForm [name='street_address2']").val(myStreetAddress2),$("#RegistrationForm [name='city']").val(myCity),$("#RegistrationForm [name='state']").val(myState),$("#RegistrationForm [name='zip']").val(myZip),$("#RegistrationForm [name='country']").val(myCountry),$("#RegistrationForm [name='email']").val(myEmail),$("#RegistrationForm [name='phone']").val(myPhone),$("#RegistrationForm [name='li_1_description']").val(mySubDomain),$("#RegistrationForm [name='li_0_description']").val(myTemplateID),document.forms.RegistrationForm.submit()):(myOptions={id:Checkout.storage.PricingPlan,code:Checkout.storage.PricingPlan.code,name:"Build",description:Checkout.storage.PricingPlan.description+" Membership",amount:100*Checkout.storage.PricingPlan.amount,token:Stripe.StripeResponseHandler,image:Stripe.StripeOptions.data.image,currency:Stripe.StripeOptions.data.currency,email:PaymentGateway.PostData.data.email},Stripe.StripeHandler.open(myOptions),$(window).on("DOMSubtreeModified",function(){Framework.UI.loadingOverlay.hide(),$(window).off("DOMSubtreeModified")}))},successRedirect:function(options){console.log(options)},reset:function(){PaymentGateway.PostData.clear()}},Checkout={storage:{TemplateID:null,PricingPlan:{id:null,code:null,name:null,description:null,amount:null},token:null},validateForms:function(){$("#RegistrationForm").validate({rules:{RegistrationFirstName:{required:!0},RegistrationLastName:{required:!0},RegistrationAddressLine1:{required:!0},RegistrationCity:{required:!0},RegistrationPostalCode:{required:!0},RegistrationCountry:{required:!0},RegistrationRegion:{required:!0},RegistrationPhoneNumber:{required:!0},emailaddress:{required:!0,email:!0},fqdn:{pattern:"[A-Za-z0-9-]{0,61}",required:!0,remote:{url:"/domains/subdomains/CheckDomains.asp",type:"post"}}},messages:{RegistrationFirstName:"Please enter your first name.",RegistrationLastName:"Please enter your last name.",RegistrationAddressLine1:"Please enter your address.",RegistrationAddressLine2:"Please enter your address.",RegistrationCity:"Please enter your city.",RegistrationPostalCode:"Please enter your postal code.",RegistrationCountry:"Please select your country.",RegistrationRegion:"Please select your region.",RegistrationPhoneNumber:"Please enter your phone number.",emailaddress:{required:"Please enter your e-mail address.",remote:"Sorry, this e-mail address has already been taken!"},fqdn:{pattern:"Sorry, this isn't a valid subdomain!",required:"Please enter the subdomain you would like to use.",remote:"Sorry, this subdomain has already been taken!"}},submitHandler:function(){var myData={fqdn:$("#RegistrationSubdomain").val()+".usebuild.co"};return $.ajax({url:"http://www.getbuild.today/Domains/Subdomains/checkdomains.asp",type:"post",beforeSend:function(){Framework.UI.loadingOverlay.add({text:"Checking Domain Availability..."})},data:myData}).success(function(data){var myAuth=data;if(console.log(data),("true"===myAuth||myAuth===!0)&&PaymentGateway.trigger(),"false"===myAuth||myAuth===!1){Framework.UI.loadingOverlay.hide();{noty({layout:"bottomCenter",theme:"relax",text:"Sorry, that subdomain is already taken.",type:"error",animation:{open:"animated fadeInUp",close:"animated fadeOut"},timeout:5e3})}}}).fail(function(){}),!1},errorClass:"error",validClass:"valid",showErrors:generateErrorList})},assignEventListeners:function(){$("[data-action='SelectPricingPlan']").on("click",Checkout.eventHandlers.SelectPricingPlan),$(window).on("popstate",function(){Stripe.StripeHandler.close()}),$(window).on("charge.succeeded",function(){console.log("Charge Succeeded.")})},eventHandlers:{SelectPricingPlan:function(event){var PricingPlan=$(event.currentTarget).closest(".PricingPlan"),PricingPlanID=PricingPlan.attr("id"),PricingPlanName=PricingPlan.find(".PricingPlanTitle").text(),PricingPlanAmount=(PricingPlan.find(".PricingPlanDescription").text(),PricingPlan.attr("data-amount").toString());if("PricingPlanFree"===PricingPlanID)Checkout.storage.PricingPlan={id:PricingPlanID,code:"free",name:"GetBuild.Today",description:PricingPlanName,amount:PricingPlanAmount};else if("PricingPlanMonthly"===PricingPlanID)Checkout.storage.PricingPlan={id:PricingPlanID,code:"monthly",name:"GetBuild.Today",description:PricingPlanName,amount:PricingPlanAmount};else{if("PricingPlanYearly"!==PricingPlanID)throw"Invalid Pricing Plan Selected.";Checkout.storage.PricingPlan={id:PricingPlanID,code:"yearly",name:"GetBuild.Today",description:PricingPlanName,amount:PricingPlanAmount}}},isCheckoutReady:function(){return PaymentGateway.ready===!0?(Framework.UI.loadingOverlay.hide(),!0):!1}},reset:function(){Checkout.storage.TemplateID=utilities.getQueryStringVars().templateid,Checkout.validateForms(),Checkout.assignEventListeners(),$("#StripeForm").remove()}},utilities={getQueryStringVars:function(){if(a=window.location.search.substr(1).split("&"),""===a)return{};for(var b={},i=0;i<a.length;++i){var p=a[i].split("=",2);b[p[0]]=1==p.length?"":decodeURIComponent(p[1].replace(/\+/g," "))}return b},createErrorPopover:function(element,text){var _popover;return _popover=$(element).popover({trigger:"manual",placement:"bottom",content:text,template:'<div class="popover"><div class="arrow"></div><div class="popover-inner"><div class="popover-content"><p></p></div></div></div>'}),_popover.data("bs.popover").options.content=text,$(element).popover("show")}};Checkout.reset(),PaymentGateway.reset(),$(document).ready(function(){$.crs()}),$(window).load(function(){Stripe.StripeHandler=StripeCheckout.configure({key:PaymentGateway.API.Keys.TestPublishable,locale:"auto",token:Stripe.StripeResponseHandler}),PaymentGateway.ready=!0,Checkout.eventHandlers.isCheckoutReady()});
//# sourceMappingURL=induction-2-stripe.js.map